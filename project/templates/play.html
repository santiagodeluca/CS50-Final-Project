{% extends "layout.html" %}

{% block main %}


<div id="card1" class="card align-middle align-items-center center-middle" style="width: 50rem;">
    <div class="card-body">
        <h1 id="word" class="card-title"></h3>
        <h2>
            <div id="count" style="display: inline;">0</div>
            <div style="display: inline;">out of {{ len }}</div>
        </h2>
        <p id="p" class="card-text">
            Learn the word in <br>
        </p>
        <a id="link1" href="" role="button" class="btn" style="background-color: #981F1F; color: white;">Cambridge Dictionary</a><br>
        <a id="link2" href="" role="button" class="btn mt-3" style="background-color: #104084; color: white;">Merriam-Webster Dictionary</a>
        <p id="p2"></p>
        <button id="button" href="" class="btn btn-success">I know it!</button>
        <a id="back" class="btn btn-primary" href="/learn" role="button" hidden >Go back</a>
    </div>
</div>


<script>
    var word = document.getElementById("word");
    var p = document.getElementById("p");
    var p2 = document.getElementById("p2");
    var link1 = document.getElementById("link1");
    var link2 = document.getElementById("link2");
    var button = document.getElementById("button");
    var back = document.getElementById("back");

    let index = 0;
    let count_num = 1;

    let word_list = JSON.parse('{{ list | tojson | safe }}');
    let length = word_list.length;

    function displayWord () {
        word.textContent = word_list[index].toUpperCase();
        link1.href = "https://dictionary.cambridge.org/dictionary/english/" + word_list[index];
        link2.href = "https://www.merriam-webster.com/dictionary/" + word_list[index];
    }

    function knowWord() {
        index += 1;
        count.textContent = `${index}`;

        if (index >= length) {
            link1.hidden = true;
            link2.hidden = true;
            word.textContent = "Amazing!";
            p.textContent = "You learned all words in this section, go back to learn more.";
            button.hidden = true;
            back.hidden = false;
            index = 0;
            
            return;
        }

        count_num += 1;

        displayWord();
    }

    button.addEventListener('click', knowWord);

    displayWord();

</script>

{% endblock%}